---
export interface Props {
  title: string;
}

const { title } = Astro.props;
---

<header
  data-nav
  role="navigation"
  class="navbar fixed inset-x-0 top-0 z-10 w-full overflow-y-hidden bg-gray-900 py-0 shadow-lg sm:overflow-y-visible sm:py-2"
>
  <nav
    class="mx-auto w-full px-3 sm:flex sm:justify-between min-[1200px]:max-w-[1140px] min-[1400px]:max-w-[1320px]"
  >
    <section class="flex items-center justify-between py-3 sm:py-0">
      <img src="/favicon.svg" height="32" width="32" alt="SamTheQ Logo" />
      <span title={title} class="flex max-w-xl px-2 line-clamp-1">{title}</span>
      <div class="flex sm:hidden">
        <button data-nav-toggle class="flex h-8 w-8 flex-col items-center justify-around">
          <span class="relative h-[0.1875rem] w-full rounded-md bg-white"></span>
          <span class="relative h-[0.1875rem] w-full rounded-md bg-white"></span>
          <span class="relative h-[0.1875rem] w-full rounded-md bg-white"></span>
        </button>
      </div>
    </section>
    <section data-nav-items class="py-2 max-sm:hidden sm:flex sm:p-0">
      <slot />
    </section>
  </nav>
</header>

<script>
  const HEADER = document.querySelector("header[data-nav]");
  const NAV_TOGGLE = document.querySelector("button[data-nav-toggle]");
  const NAV_ITEMS = document.querySelector("section[data-nav-items]");
  window.addEventListener("pointerdown", (e) => {
    if (!HEADER || !NAV_ITEMS || HEADER.contains(e.target as Node)) {
      return;
    }
    NAV_ITEMS.classList.add("max-sm:hidden");
  });

  if (NAV_TOGGLE && NAV_ITEMS) {
    NAV_TOGGLE.addEventListener("click", () => {
      NAV_ITEMS.classList.toggle("max-sm:hidden");
    });
  }
</script>
