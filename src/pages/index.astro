---
import PostCard from "@components/Blog/PostCard.astro";
import BaseLayout from "@layouts/BaseLayout.astro";
import { sortPosts } from "@util/BlogHelper";
import { getCollection } from "astro:content";

const allPosts = await getCollection("blog", ({ data }) => {
  return data.draft !== true || import.meta.env.DEV;
});
---

<BaseLayout title="Blog | SamTheQ" description="Samuel Quinones' Personal Blog">
  <main class="bs-container-md mt-16 min-h-full max-w-[52rem] grow scroll-mt-16 px-4 pb-28">
    <!-- sm:px-6 md:px-8 lg:max-w-6xl xl:px-12 -->
    <section data-post-heading class="pt-5">
      <h1 class="m-0 text-5xl font-extrabold">
        Welcome to <span class="text-gradient">Astro</span>
      </h1>
      <p class="instructions">
        To get started, open the directory <code>src/pages</code> in your project.<br />
        <strong>Code Challenge:</strong> Tweak the "Welcome to Astro" message above.
      </p>
    </section>
    <ul data-post-count={allPosts.length} class="mt-8 space-y-16">
      {
        allPosts
          .sort(sortPosts)
          .map((post) => <PostCard {...post.data} slug={post.slug} showTags />)
      }
    </ul>
  </main>
</BaseLayout>
